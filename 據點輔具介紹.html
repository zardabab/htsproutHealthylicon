<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>據點輔具介紹</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0ea5e9;
            --accent: #6366f1;
            --bg: #f4f6fb;
            --card: #ffffff;
            --text: #0f172a;
            --muted: #6b7280;
            --border: #e5e7eb;
        }

        * { box-sizing: border-box; }
        body {
            margin: 0;
            background: radial-gradient(circle at 20% 20%, rgba(14,165,233,0.07), transparent 35%),
                        radial-gradient(circle at 80% 0%, rgba(99,102,241,0.08), transparent 30%),
                        var(--bg);
            color: var(--text);
            font-family: 'Noto Sans TC', 'Segoe UI', sans-serif;
            padding: 24px 12px 48px;
        }

        .shell { max-width: 1200px; margin: 0 auto; }

        .hero {
            background: linear-gradient(135deg, rgba(14,165,233,0.12), rgba(99,102,241,0.12));
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 22px 22px 18px;
            box-shadow: 0 18px 40px rgba(15, 23, 42, 0.08);
        }

        .hero-title { font-size: 1.6rem; font-weight: 700; margin: 0; }
        .hero-subtitle { color: var(--muted); margin-top: 6px; margin-bottom: 0; }

        .pill-row { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
        .pill { padding: 6px 10px; border-radius: 999px; background: #fff; border: 1px solid var(--border); color: var(--muted); font-size: 0.9rem; }

        .stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin: 18px 0; }
        .stat-card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 14px; box-shadow: 0 10px 25px rgba(15,23,42,0.04); }
        .stat-value { font-size: 1.4rem; font-weight: 700; color: var(--accent); }
        .stat-label { color: var(--muted); font-size: 0.9rem; }

        .controls { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; margin: 6px 0 14px; }
        .controls input, .controls select { min-width: 200px; }

        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 12px; }
        .item-card { border-radius: 14px; padding: 14px; box-shadow: 0 10px 26px rgba(15,23,42,0.08); border: 1px solid transparent; color: #0f172a; display: flex; flex-direction: column; height: 220px; }
        .item-card h5 { margin: 0 0 6px 0; font-size: 0.95rem; flex-shrink: 0; line-height: 1.3; }
        .item-meta { font-size: 0.85rem; color: #0f172a; opacity: 0.75; margin-bottom: 6px; flex-shrink: 0; }
        .item-card-content { flex: 1; overflow: hidden; min-height: 0; }
        .item-card-footer { margin-top: auto; flex-shrink: 0; }
        .item-card.vr { background: linear-gradient(135deg, #ecfeff, #dbeafe); border-color: #bfdbfe; }
        .item-card.fit { background: linear-gradient(135deg, #fefce8, #ffedd5); border-color: #fcd34d; }
        .item-card.api { background: linear-gradient(135deg, #eef2ff, #e0f2fe); border-color: #c7d2fe; }
        .item-card.robot { background: linear-gradient(135deg, #fef2f2, #fee2e2); border-color: #fecdd3; }
        .badge-soft { border-radius: 999px; padding: 4px 10px; font-size: 0.85rem; border: 1px solid #e2e8f0; background: #f8fafc; color: #0f172a; display: inline-flex; align-items: center; gap: 6px; }
        .badge-soft.vr { background: #e0f2fe; color: #0369a1; border-color: #bae6fd; }
        .badge-soft.fit { background: #fef3c7; color: #92400e; border-color: #fcd34d; }
        .badge-soft.api { background: #e0e7ff; color: #4338ca; border-color: #c7d2fe; }
        .badge-soft.robot { background: #fee2e2; color: #b91c1c; border-color: #fecdd3; }

        table { font-size: 0.95rem; }
        thead th { background: #f8fafc; border-bottom: 2px solid var(--border); }
        tbody td { vertical-align: top; }
        .table-responsive { border: 1px solid var(--border); border-radius: 14px; overflow: hidden; background: var(--card); box-shadow: 0 12px 26px rgba(15,23,42,0.05); }

        .total-row { background: #eef2ff; font-weight: 700; }
        .muted { color: var(--muted); }

        @media (max-width: 640px) {
            body { padding: 16px 10px 36px; }
            .controls { flex-direction: column; align-items: stretch; }
            .controls input, .controls select { width: 100%; }
        }
    </style>
</head>
<body>
<div class="shell">
    <div class="hero mb-3">
        <div class="d-flex flex-wrap align-items-center justify-content-between gap-2">
            <div>
                <div class="hero-title">據點輔具介紹</div>
                <div class="hero-subtitle">岡山秀傳醫院 · VR課程 · 銀髮體適能 · 外骨骼/關節機器人</div>
            </div>
            <span class="badge-soft"><i class="fa-solid fa-circle-dot me-1"></i>最新報價彙整</span>
        </div>
        <div class="pill-row">
            <span class="pill"><i class="fa-solid fa-vr-cardboard me-1"></i>VR 照服課程</span>
            <span class="pill"><i class="fa-solid fa-dumbbell me-1"></i>銀髮體適能 7 站</span>
            <span class="pill"><i class="fa-solid fa-robot me-1"></i>外骨骼 / 關節機器人</span>
            <span class="pill"><i class="fa-solid fa-code-branch me-1"></i>API 串接</span>
        </div>
    </div>

    <div class="stat-grid">
        <div class="stat-card">
            <div class="stat-value" id="stat-count">-</div>
            <div class="stat-label">品項數</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="stat-vr">-</div>
            <div class="stat-label">VR / 體適能品項</div>
        </div>
    </div>

    <div class="controls">
        <input type="search" class="form-control" id="search" placeholder="搜尋品項或備註關鍵字">
        <select class="form-select" id="category-filter">
            <option value="">全部分類</option>
            <option value="VR/課程">VR / 課程</option>
            <option value="體適能">銀髮體適能</option>
            <option value="API">API 串接</option>
            <option value="機器人">機器人</option>
        </select>
    </div>

    <div class="card-grid mb-3" id="card-grid"></div>

    <div class="table-responsive">
        <table class="table table-striped mb-0" id="item-table">
            <thead>
                <tr>
                    <th style="width:48px;">#</th>
                    <th style="width:240px;">品項</th>
                    <th style="width:120px;">分類</th>
                    <th style="width:70px;">單位</th>
                    <th style="width:70px;">數量</th>
                    <th style="width:180px;">備註</th>
                </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
                <tr class="total-row">
                    <td colspan="5" class="text-end"></td>
                    <td></td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(function() {
    const items = [
        // {
        //     id: 1,
        //     name: '岡山秀傳醫院照服課程 VR',
        //     category: 'VR/課程',
        //     unit: '式',
        //     qty: 1,
        //     price: 946000,
        //     note: 'VR 互動課程，含考核與成績評估'
        // },
        // {
        //     id: 2,
        //     name: 'VR 頭盔 (XR2 Gen 2)',
        //     category: 'VR/課程',
        //     unit: '台',
        //     qty: 2,
        //     price: 22000,
        //     note: '共 2 台'
        // },
        {
            id: 3,
            name: '銀髮體適能 7 站檢測套組',
            category: '體適能',
            unit: '套',
            qty: 1,
            price: 500500,
            note: '電腦由院方提供 (參考 Remark1)'
        },
        {
            id: 4,
            name: 'API 串接費用 (標準格式)',
            category: 'API',
            unit: '式',
            qty: 1,
            price: null,
            note: '七項銀髮體適能數據串接；需求確認後報價'
        },
        {
            id: 5,
            name: '外骨骼機器人 FREE Walk (FW-PR-02)',
            category: '機器人',
            unit: '台',
            qty: 1,
            price: 2200000,
            note: '含教育訓練與兩年保固'
        },
        {
            id: 6,
            name: '外骨骼機器人專用輔助器',
            category: '機器人',
            unit: '台',
            qty: 1,
            price: 198000,
            note: '含教育訓練與兩年保固'
        },
        {
            id: 7,
            name: '關節活動訓練機器人 NimBO (NB-PR-01)',
            category: '機器人',
            unit: '組',
            qty: 1,
            price: 730000,
            note: '含上肢配件、安裝設定與教育訓練'
        }
    ];

    const catClassMap = {
        'VR/課程': 'vr',
        '體適能': 'fit',
        'API': 'api',
        '機器人': 'robot'
    };

    function format(num) {
        if (num === null || num === undefined) return '—';
        return num.toLocaleString('zh-TW');
    }

    function renderCards(list) {
        const $grid = $('#card-grid');
        $grid.empty();
        list.forEach(item => {
            const subtotal = item.price ? item.price * item.qty : null;
            const catClass = catClassMap[item.category] || '';
            const badgeClass = catClass ? ` ${catClass}` : '';
            const html = `
                <div class="item-card ${catClass}">
                    <div class="item-card-top">
                        <div class="d-flex justify-content-between align-items-start gap-2">
                            <h5>${item.name}</h5>
                            <span class="badge-soft${badgeClass}"><i class="fa-solid fa-tag"></i>${item.category}</span>
                        </div>
                        <div class="item-meta">${item.unit} × ${item.qty}</div>
                    </div>
                    <div class="item-card-content">
                        ${item.note ? `<div class="mb-2" style="color:#0f172a; opacity:0.72; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;">備註：${item.note}</div>` : ''}
                    </div>
                    <div class="item-card-footer fw-semibold"></div>
                </div>`;
            $grid.append(html);
        });
    }

    function renderTable(list) {
        const $tbody = $('#item-table tbody');
        $tbody.empty();
        list.forEach((item, idx) => {
            $tbody.append(`
                <tr>
                    <td>${idx + 1}</td>
                    <td>${item.name}</td>
                    <td><span class="badge-soft ${catClassMap[item.category] || ''}">${item.category}</span></td>
                    <td>${item.unit}</td>
                    <td>${item.qty}</td>
                    <td>${item.note || ''}</td>
                </tr>`);
        });
        $('#stat-count').text(list.length);
        const vrCount = list.filter(i => i.category === 'VR/課程' || i.category === '體適能').length;
        $('#stat-vr').text(vrCount);
    }

    function applyFilter() {
        const keyword = $('#search').val().toLowerCase().trim();
        const cat = $('#category-filter').val();
        const filtered = items.filter(it => {
            const matchCat = cat ? it.category === cat : true;
            const note = it.note ? it.note.toLowerCase() : '';
            const matchText = keyword ? (it.name.toLowerCase().includes(keyword) || note.includes(keyword)) : true;
            return matchCat && matchText;
        });
        renderCards(filtered);
        renderTable(filtered);
    }

    $('#search').on('input', applyFilter);
    $('#category-filter').on('change', applyFilter);

    renderCards(items);
    renderTable(items);
});
</script>
</body>
</html>
