<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 個案管理名單</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e8f4f8 100%);
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        
        .page-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
            margin-bottom: 1.5rem;
        }
        
        .page-header h1 {
            margin: 0;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        .info-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left: 5px solid #2196f3;
            border-radius: 10px;
            padding: 1rem 1.5rem;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.15);
            margin-bottom: 1.5rem;
        }
        
        .info-box i {
            color: #1976d2;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        .card-body {
            padding: 2rem;
        }
        
        .table {
            margin-bottom: 0;
        }
        
        .table thead th {
            background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
            color: white;
            font-weight: 600;
            border: none;
            padding: 1.2rem 1rem;
            font-size: 0.9rem;
            letter-spacing: 0.8px;
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.3);
            position: relative;
            border-bottom: 3px solid #be185d;
        }
        
        .table thead th:first-child {
            border-top-left-radius: 10px;
        }
        
        .table thead th:last-child {
            border-top-right-radius: 10px;
        }
        
        .table thead th i {
            color: #fce7f3;
        }
        
        .table tbody tr {
            transition: all 0.3s ease;
            border-bottom: 1px solid #e9ecef;
        }
        
        .table tbody tr:hover {
            background-color: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        .table tbody td {
            padding: 1rem;
            vertical-align: middle;
        }
        
        .status-btn {
            margin-right: 5px;
            margin-bottom: 5px;
            position: relative;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .status-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .status-btn i.fa-check {
            display: none;
            margin-left: 5px;
        }
        
        .status-btn.completed i.fa-check {
            display: inline-block;
            animation: checkPop 0.3s ease;
        }
        
        @keyframes checkPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .status-btn.completed {
            background-color: #10b981;
            border-color: #10b981;
            color: white;
        }
        
        /* 狀況標籤顏色 */
        .badge-condition {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
        }
        
        .condition-脆骨 {
            background: linear-gradient(135deg, #fef3c7 0%, #fcd34d 100%);
            color: #92400e;
            border: 2px solid #fbbf24;
        }
        
        .condition-神經損傷 {
            background: linear-gradient(135deg, #ddd6fe 0%, #a78bfa 100%);
            color: #5b21b6;
            border: 2px solid #8b5cf6;
        }
        
        .condition-腦中風 {
            background: linear-gradient(135deg, #fecaca 0%, #f87171 100%);
            color: #991b1b;
            border: 2px solid #ef4444;
        }
        
        .condition-衰弱高齡 {
            background: linear-gradient(135deg, #d1fae5 0%, #6ee7b7 100%);
            color: #065f46;
            border: 2px solid #10b981;
        }
        
        .badge.bg-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%) !important;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        /* 結案狀態樣式 */
        .case-status {
            padding: 0.6rem 1.2rem;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            white-space: nowrap;
            transition: all 0.3s ease;
        }
        
        .case-status.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: 2px solid #10b981;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .case-status.active:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        
        .case-status.closed {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
            border: 2px solid #6b7280;
            box-shadow: 0 4px 12px rgba(107, 114, 128, 0.3);
        }
        
        .case-status.closed:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(107, 114, 128, 0.4);
        }
        
        /* 個管師樣式 */
        .case-manager {
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #e0e7ff 0%, #dbeafe 100%);
            border-radius: 8px;
            border: 2px solid #6366f1;
            color: #4f46e5;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .case-manager i {
            color: #818cf8;
        }
        
        .btn-secondary {
            border-radius: 10px;
            padding: 0.6rem 1.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(108, 117, 125, 0.3);
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-4 px-4">
        <div class="page-header d-flex justify-content-between align-items-center">
            <div>
                <h1><i class="fas fa-heartbeat me-2"></i>AI 個案管理系統</h1>
                <p class="mb-0 mt-2" style="opacity: 0.9; font-size: 1rem;"><i class="fas fa-users me-2"></i>用心照護每一位個案</p>
            </div>
            <a href="index-gpt.html" class="btn btn-light btn-lg"><i class="fas fa-home me-2"></i>回首頁</a>
        </div>

        <div class="info-box d-flex align-items-center">
            <i class="fas fa-info-circle me-3 fs-4"></i>
            <div>
                <strong style="font-size: 1.05rem;">評估進度說明</strong>
                <p class="mb-0 mt-1"><i class="fas fa-check-circle text-success me-2"></i>綠色按鈕代表已完成評估，點擊按鈕可查看或編輯評估資料</p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <thead>
                            <tr>
                                <th scope="col" style="width: 120px;"><i class="fas fa-hashtag me-2"></i>個案編號</th>
                                <th scope="col" style="width: 120px;"><i class="fas fa-user me-2"></i>姓名</th>
                                <th scope="col" style="width: 100px;"><i class="fas fa-tag me-2"></i>類型</th>
                                <th scope="col" style="width: 150px;"><i class="fas fa-notes-medical me-2"></i>狀況</th>
                                <th scope="col"><i class="fas fa-tasks me-2"></i>評估進度</th>
                                <th scope="col" style="width: 140px;"><i class="fas fa-user-md me-2"></i>個管師</th>
                                <th scope="col" style="width: 120px;"><i class="fas fa-flag-checkered me-2"></i>結案</th>
                            </tr>
                        </thead>
                        <tbody id="caseListBody">
                            <!-- Data will be populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
        // Demo Data
        const conditions = ['脆骨', '神經損傷', '腦中風', '衰弱高齡'];
        const managers = ['林護理師', '王物治師', '陳營養師', '張復健師', '李社工師'];
        
        const cases = [
            { id: 'C001', name: '王大明', type: 'PAC', condition: '腦中風', manager: '林護理師', status: { '初評': true, '22天複評': false, '42天複評': false, '64天複評': false, '82天複評': false }, closed: false },
            { id: 'C002', name: '李小華', type: 'PAC', condition: '神經損傷', manager: '王物治師', status: { '初評': true, '22天複評': true, '42天複評': false, '64天複評': false, '82天複評': false }, closed: false },
            { id: 'C003', name: '張志豪', type: 'PAC', condition: '脆骨', manager: '陳營養師', status: { '初評': false, '22天複評': false, '42天複評': false, '64天複評': false, '82天複評': false }, closed: false },
            { id: 'C004', name: '陳淑芬', type: 'PAC', condition: '衰弱高齡', manager: '張復健師', status: { '初評': true, '22天複評': true, '42天複評': true, '64天複評': false, '82天複評': false }, closed: false },
            { id: 'C005', name: '林美玲', type: 'PAC', condition: '腦中風', manager: '李社工師', status: { '初評': true, '22天複評': true, '42天複評': true, '64天複評': true, '82天複評': true }, closed: true }
        ];

        const milestones = ['初評', '22天複評', '42天複評', '64天複評', '82天複評'];

        // 狀況圖示對應
        const conditionIcons = {
            '脆骨': 'fa-bone',
            '神經損傷': 'fa-project-diagram',
            '腦中風': 'fa-head-side-virus',
            '衰弱高齡': 'fa-user-clock'
        };
        
        function renderTable() {
            const tbody = document.getElementById('caseListBody');
            tbody.innerHTML = '';

            cases.forEach(c => {
                const tr = document.createElement('tr');
                
                let buttonsHtml = '';
                milestones.forEach(m => {
                    const isCompleted = c.status[m];
                    const btnClass = isCompleted ? 'btn-outline-success completed' : 'btn-outline-primary';
                    // Pass case ID, name, milestone type, and condition to the next page
                    const url = `AI智慧個管系統.html?id=${c.id}&name=${encodeURIComponent(c.name)}&stage=${encodeURIComponent(m)}&condition=${encodeURIComponent(c.condition)}`;
                    
                    buttonsHtml += `
                        <a href="${url}" class="btn ${btnClass} btn-sm status-btn">
                            ${m} <i class="fas fa-check"></i>
                        </a>
                    `;
                });
                
                // 根據狀況選擇對應的圖示和樣式
                const conditionIcon = conditionIcons[c.condition] || 'fa-notes-medical';
                const conditionClass = `condition-${c.condition}`;
                
                // 結案狀態顯示
                const caseStatusHtml = c.closed 
                    ? `<span class="case-status closed"><i class="fas fa-check-circle"></i>已結案</span>`
                    : `<span class="case-status active"><i class="fas fa-heartbeat"></i>進行中</span>`;

                tr.innerHTML = `
                    <td><strong>${c.id}</strong></td>
                    <td><i class="fas fa-user-circle text-primary me-2"></i>${c.name}</td>
                    <td><span class="badge bg-primary">${c.type}</span></td>
                    <td><span class="badge-condition ${conditionClass}"><i class="fas ${conditionIcon}"></i>${c.condition}</span></td>
                    <td>${buttonsHtml}</td>
                    <td><span class="case-manager"><i class="fas fa-user-nurse"></i>${c.manager}</span></td>
                    <td>${caseStatusHtml}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        document.addEventListener('DOMContentLoaded', renderTable);
    </script>
</body>
</html>
